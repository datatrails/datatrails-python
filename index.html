

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7K46H3KK7N"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-7K46H3KK7N');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DataTrails Python Client &mdash; DATATRAILS v0.33.3a0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="_static/css/datatrails_theme.css?v=4edd3201" />

  
    <link rel="shortcut icon" href="_static/DataTrails_Favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=b21b95e9"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Features" href="features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#">
            
              <img src="_static/DataTrails_Wordmark_White.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Note Books (BETA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixtures.html">Fixtures (Common Attributes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="code/index.html">Code Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="logger.html">Logger</a></li>
<li class="toctree-l1"><a class="reference internal" href="sbom.html">SBOM CDX for PySDK</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">DATATRAILS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">DataTrails Python Client</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datatrails-python-client">
<span id="readme"></span><h1>DataTrails Python Client<a class="headerlink" href="#datatrails-python-client" title="Link to this heading"></a></h1>
<p>The standard DataTrails Python Client.</p>
<p>Please note that the canonical API for DataTrails is always the REST API
documented at <a class="reference external" href="https://docs.datatrails.ai">https://docs.datatrails.ai</a></p>
</section>
<section id="support">
<h1>Support<a class="headerlink" href="#support" title="Link to this heading"></a></h1>
<p>This package currently is tested against Python versions 3.9,3.10,3.11, 3.12 and 3.13.</p>
<p>The current default version is 3.9 - this means that this package will not
use any features specific to versions 3.10 and later.</p>
<p>After End of Life of a particular Python version, support is offered on a best effort
basis. We may ask you to update your Python version to help solve the problem,
if it cannot be reasonably resolved in your current version.</p>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<p>Use standard python pip utility:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>datatrails-archivist
</pre></div>
</div>
<p>If your version of python3 is too old an error of this type or similar will be emitted:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ERROR: Could not find a version that satisfies the requirement datatrails-archivist (from versions: none)
ERROR: No matching distribution found for datatrails-archivist</p>
</div>
</section>
<section id="example">
<h1>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h1>
<p>You can then use the examples code to create assets (see examples directory):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Create an asset in DataTrails with User Token.</span>

<span class="sd">The module contains two functions: main and create_asset. Main function parses in</span>
<span class="sd">a url to the Archivist and credentials, which is a user authorization.</span>
<span class="sd">The main function would initialize an archivist connection using the url and</span>
<span class="sd">the credentials, called &quot;arch&quot;, then call arch.assets.create() and the asset will be created.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getenv</span>

<span class="kn">from</span> <span class="nn">archivist.archivist</span> <span class="kn">import</span> <span class="n">Archivist</span>


<span class="k">def</span> <span class="nf">create_asset</span><span class="p">(</span><span class="n">arch</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an asset using Archivist Connection.</span>

<span class="sd">    Args:</span>
<span class="sd">        arch: archivist connection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        newasset: a new asset created.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;arc_display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;display_name&quot;</span><span class="p">,</span>  <span class="c1"># Asset&#39;s display name in the user interface</span>
        <span class="s2">&quot;arc_description&quot;</span><span class="p">:</span> <span class="s2">&quot;display_description&quot;</span><span class="p">,</span>  <span class="c1"># Asset&#39;s description in the user interface</span>
        <span class="s2">&quot;arc_display_type&quot;</span><span class="p">:</span> <span class="s2">&quot;display_type&quot;</span><span class="p">,</span>  <span class="c1"># Arc_display_type is a free text field</span>
        <span class="c1"># allowing the creator of</span>
        <span class="c1"># an asset to specify the asset</span>
        <span class="c1"># type or class. Be careful when setting this:</span>
        <span class="c1"># assets are grouped by type and</span>
        <span class="c1"># sharing policies can be</span>
        <span class="c1"># configured to share assets based on</span>
        <span class="c1"># their arc_display_type.</span>
        <span class="c1"># So a mistake here can result in asset data being</span>
        <span class="c1"># under- or over-shared.</span>
        <span class="s2">&quot;some_custom_attribute&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span>  <span class="c1"># You can add any custom value as long as</span>
        <span class="c1"># it does not start with arc_</span>
    <span class="p">}</span>
    <span class="c1">#</span>
    <span class="c1"># There are 3 alternatives</span>
    <span class="c1">#</span>
    <span class="c1"># 1. Create the asset:</span>
    <span class="c1">#    The first argument is the attributes of the asset</span>
    <span class="k">return</span> <span class="n">arch</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="c1"># 2. alternatively one can wait for the asset to be confirmed in the</span>
    <span class="c1">#    immutable store.</span>
    <span class="c1">#    The second argument is wait for confirmation:</span>
    <span class="c1">#      If @confirm@ is True then this function will not</span>
    <span class="c1">#      return until the asset is confirmed.</span>
    <span class="c1">#</span>
    <span class="c1"># Confirmation guarantees that 3rd parties can retrieve and cryptographically</span>
    <span class="c1"># verify your Assets, which can take a few seconds to propagate. It is typically</span>
    <span class="c1"># not necessary to wait unless your workflow involves near-real-time</span>
    <span class="c1"># communication with 3rd parties and the 3rd party needs immediate cryptographic</span>
    <span class="c1"># verification of your new Asset.</span>
    <span class="k">return</span> <span class="n">arch</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span> <span class="n">confirm</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="c1"># 3. lastly if some work can be done whilst the asset is confirmed then this call</span>
    <span class="c1"># can be replaced by a two-step alternative:</span>

    <span class="n">asset</span> <span class="o">=</span> <span class="n">arch</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">props</span><span class="o">=</span><span class="n">props</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>

    <span class="c1"># ... do something else here</span>
    <span class="c1"># and then wait for confirmation</span>

    <span class="k">return</span> <span class="n">arch</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">wait_for_confirmation</span><span class="p">(</span><span class="n">asset</span><span class="p">[</span><span class="s1">&#39;identity&#39;</span><span class="p">]))</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main function of create asset.</span>

<span class="sd">    Parse in user input of url and client id/secrets and use them to</span>
<span class="sd">    create an example archivist connection and create an asset.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># client id and client secret is obtained from the appidp endpoint - see the</span>
    <span class="c1"># application registrations example code in examples/applications_registration.py</span>
    <span class="c1">#</span>
    <span class="c1"># client id is an environment variable. client_secret is stored in a file in a</span>
    <span class="c1"># directory that has 0700 permissions. The location of this file is set in</span>
    <span class="c1"># the client_secret_filename environment variable.</span>
    <span class="n">client_id</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATATRAILS_APPREG_CLIENT&quot;</span><span class="p">)</span>
    <span class="n">client_secret_file</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATATRAILS_APPREG_SECRET_FILENAME&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">client_secret_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tokenfile</span><span class="p">:</span>
        <span class="n">client_secret</span> <span class="o">=</span> <span class="n">tokenfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="c1"># Initialize connection to Archivist. max_time is the time to wait for confirmation</span>
    <span class="c1"># of an asset or event creation - the default is 300 seconds but one can optionally</span>
    <span class="c1"># specify a different value.</span>
    <span class="k">with</span> <span class="n">arch</span> <span class="o">=</span> <span class="n">Archivist</span><span class="p">(</span>
        <span class="s2">&quot;https://app.datatrails.ai&quot;</span><span class="p">,</span>
        <span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">),</span>
        <span class="n">max_time</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">arch</span><span class="p">:</span>
        <span class="c1"># Create a new asset</span>
        <span class="n">asset</span> <span class="o">=</span> <span class="n">create_asset</span><span class="p">(</span><span class="n">arch</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Asset&quot;</span><span class="p">,</span> <span class="n">asset</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="notebooks">
<h1>Notebooks<a class="headerlink" href="#notebooks" title="Link to this heading"></a></h1>
<p>Some jupyter notebooks are available to exercise the examples code.
These examples can be downloaded from python.datatrails.ai and run in a local install
of jupyter notebook such as jupyterLabDesktop.</p>
<p>Please consult <a class="reference external" href="https://python.datatrails.ai/notebooks.html">https://python.datatrails.ai/notebooks.html</a> for details.</p>
</section>
<section id="file-story-runner">
<h1>File Story Runner<a class="headerlink" href="#file-story-runner" title="Link to this heading"></a></h1>
<p>You can run scenarios - a sequence of steps - from a python dictionary or from a yaml
or json file.</p>
<section id="python">
<h2>Python<a class="headerlink" href="#python" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">pyaml_env</span> <span class="kn">import</span> <span class="n">parse_config</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">exit</span> <span class="k">as</span> <span class="n">sys_exit</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="kn">import</span> <span class="n">stdout</span> <span class="k">as</span> <span class="n">sys_stdout</span>

<span class="kn">from</span> <span class="nn">archivist</span> <span class="kn">import</span> <span class="n">about</span>
<span class="kn">from</span> <span class="nn">archivist.archivist</span> <span class="kn">import</span> <span class="n">Archivist</span>
<span class="kn">from</span> <span class="nn">archivist.parser</span> <span class="kn">import</span> <span class="n">common_parser</span><span class="p">,</span> <span class="n">endpoint</span>

<span class="n">LOGGER</span> <span class="o">=</span> <span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">arch</span><span class="p">:</span> <span class="n">Archivist</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using version </span><span class="si">%s</span><span class="s2"> of datatrails-archivist&quot;</span><span class="p">,</span> <span class="n">about</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Namespace </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">namespace</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">yamlfile</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">y</span><span class="p">:</span>
        <span class="n">arch</span><span class="o">.</span><span class="n">runner</span><span class="p">(</span><span class="n">parse_config</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="n">sys_exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">common_parser</span><span class="p">(</span><span class="s2">&quot;Executes the archivist runner from a yaml file&quot;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&quot;yamlfile&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the yaml file describing the steps to conduct&quot;</span>
    <span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">arch</span> <span class="o">=</span> <span class="n">endpoint</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

    <span class="n">run</span><span class="p">(</span><span class="n">arch</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">(</span><span class="n">sys_stdout</span><span class="p">)</span>
    <span class="n">sys_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="command-line">
<h2>Command Line<a class="headerlink" href="#command-line" title="Link to this heading"></a></h2>
<p>This functionality is also available with the CLI tool <code class="code docutils literal notranslate"><span class="pre">archivist_runner</span></code>, which is bundled with version v0.10 onwards of the <code class="code docutils literal notranslate"><span class="pre">datatrails-archivist</span></code>.</p>
<p>You can verify the installation by running the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>archivist_runner<span class="w"> </span>-h
</pre></div>
</div>
<p>Which will show you the available options when using <code class="code docutils literal notranslate"><span class="pre">archivist_runner</span></code>.</p>
<p>To use the <code class="code docutils literal notranslate"><span class="pre">archivist_runner</span></code> command you will need the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>A Client ID and Client Secret by creating an <a class="reference external" href="https://docs.datatrails.ai/developers/developer-patterns/getting-access-tokens-using-app-registrations/">App Registration</a></p></li>
<li><p>The YAML file with the operations you wish to run</p></li>
<li><p>The URL of your DataTrails instance, this is typically <cite>https://app.datatrails.ai</cite></p></li>
</ul>
</div></blockquote>
<p>Example usage:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>archivist_runner<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-u<span class="w"> </span>https://app.datatrails.ai<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--client-id<span class="w"> </span>&lt;your-client-id&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--client-secret<span class="w"> </span>&lt;your-client-secret&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>functests/test_resources/richness_story.yaml
</pre></div>
</div>
</section>
<section id="example-yaml-snippet">
<h2>Example Yaml Snippet<a class="headerlink" href="#example-yaml-snippet" title="Link to this heading"></a></h2>
<p>This is an example of creating an asset and creating an event for that asset. The
yaml file consists of a list of steps.</p>
<p>Each step consists of control parameters (specified in the 'step' dictionary) and
the yaml representation of the request body for an asset or event.</p>
<p>The confirm: field is a control variable for the PythonSDK that ensures that the
asset or event is confirmed before returning. This is optional and is only required
3rd parties need to immediately retrieve and cryptographically
verify your Assets, which can take a few seconds to propagate. It is typically
not necessary to wait unless your workflow involves near-real-time
communication with 3rd parties and the 3rd party needs instant cryptographic
verification of your new Asset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the asset is important. The value of the name is carried forward for
every operation - in this case the name of the asset is 'radiation bag 1'.</p>
<p>Arguments to the archivist are usually strings - in this example radioactive is
'true' which archivist will treat as a boolean.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="c1"># Demonstration of applying a Richness compliance policy to an asset that undergoes</span>
<span class="c1"># events that may or may not make the asset compliant or non-compliant.</span>
<span class="c1">#</span>
<span class="c1"># The operation field is a string that represents the method bound to an endpoint and</span>
<span class="c1"># the args and kwargs correspond to the arguments to such a method.</span>
<span class="c1">#</span>
<span class="c1"># NB the assets and events endpoints require all values to be strings. Other values may</span>
<span class="c1"># be of the correct type such as confirm which is a boolean.</span>
<span class="c1">#</span>
<span class="nt">steps</span><span class="p">:</span>

<span class="w">  </span><span class="c1"># note the values to the assets.create method are string representations of boolean</span>
<span class="w">  </span><span class="c1"># and numbers</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">step</span><span class="p">:</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ASSETS_CREATE</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an empty radiation bag with id 1.</span>
<span class="w">      </span><span class="nt">asset_label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">radiation bag 1</span>
<span class="w">    </span><span class="nt">behaviours</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RecordEvidence</span>
<span class="w">    </span><span class="nt">attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">arc_display_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">radiation bag 1</span>
<span class="w">      </span><span class="nt">radioactive</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">      </span><span class="nt">radiation_level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0&quot;</span>

<span class="w">  </span><span class="c1"># setup the radiation bags to have a varing amount of radiactive waste</span>
<span class="w">  </span><span class="c1"># note the values to the events.create method are string representations of boolean</span>
<span class="w">  </span><span class="c1"># and numbers</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">step</span><span class="p">:</span>
<span class="w">      </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EVENTS_CREATE</span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create Event adding 3 rads of radiation to bag 1, increasing its weight by 1kg.</span>
<span class="w">      </span><span class="nt">asset_label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">radiation bag 1</span>
<span class="w">    </span><span class="nt">operation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Record</span>
<span class="w">    </span><span class="nt">behaviour</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RecordEvidence</span>
<span class="w">    </span><span class="nt">event_attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">arc_description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">add waste to bag</span>
<span class="w">      </span><span class="nt">arc_evidence</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">see attached conformance report</span>
<span class="w">      </span><span class="nt">conformance_report</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blobs/e2a1d16c-03cd-45a1-8cd0-690831df1273</span>
<span class="w">    </span><span class="nt">asset_attributes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">radiation_level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3&quot;</span>
<span class="w">      </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="logging">
<h1>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h1>
<p>Follows the Django model as described here: <a class="reference external" href="https://docs.djangoproject.com/en/3.2/topics/logging/">https://docs.djangoproject.com/en/3.2/topics/logging/</a></p>
<p>The base logger for this package is rooted at &quot;archivist&quot; with subloggers for each endpoint:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>archivist.archivist</dt><dd><p>sublogger for archivist submodule</p>
</dd>
<dt>archivist.assets</dt><dd><p>sublogger for assets submodule</p>
</dd>
</dl>
</div>
<p>and for other endpoints.</p>
<p>Logging is configured by either defining a root logger with suitable handlers, formatters etc. or
by using dictionary configuration as described here: <a class="reference external" href="https://docs.python.org/3/library/logging.config.html#logging-config-dictschema">https://docs.python.org/3/library/logging.config.html#logging-config-dictschema</a></p>
<p>A recommended minimum configuration would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">dictConfig</span><span class="p">({</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;disable_existing_loggers&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;console&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;logging.StreamHandler&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;root&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;console&quot;</span><span class="p">],</span>
        <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">})</span>
</pre></div>
</div>
<p>For convenience this has been encapsulated in a convenience function <code class="code docutils literal notranslate"><span class="pre">set_logger</span></code>
which should be called before anything else:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">archivist.logger</span> <span class="kn">import</span> <span class="n">set_logger</span>
<span class="kn">from</span> <span class="nn">archivist.archivist</span> <span class="kn">import</span> <span class="n">Archivist</span>

<span class="n">set_logger</span><span class="p">(</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">)</span>
<span class="n">client_id</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATATRAILS_APPREG_CLIENT&quot;</span><span class="p">)</span>
<span class="n">client_secret_file</span> <span class="o">=</span> <span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATATRAILS_APPREG_SECRET_FILENAME&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">client_secret_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tokenfile</span><span class="p">:</span>
    <span class="n">client_secret</span> <span class="o">=</span> <span class="n">tokenfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="n">arch</span> <span class="o">=</span> <span class="n">Archivist</span><span class="p">(</span>
    <span class="s2">&quot;https://app.datatrails.ai&quot;</span><span class="p">,</span>
    <span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">client_secret</span><span class="p">),</span>
    <span class="n">max_time</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="development">
<h1>Development<a class="headerlink" href="#development" title="Link to this heading"></a></h1>
<p>For instructions on contributing to the DataTrails SDK see DEVELOPMENT.md.</p>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="features.html" class="btn btn-neutral float-right" title="Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, support@datatrails.ai.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>