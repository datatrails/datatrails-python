---
# The step field is a string that represents the method bound to an endpoint and
# the args and kwargs correspond to the arguments to such a method.
#
# Createa a number of offices equipped with printers, coffee machines and security
# cameras

# ====================================================================================
##   NOTE WELL: delete this file when a fully JINJIFIED story is defined
# in synsation_story.yaml.j2 and synsation_story.value.yaml...
# ====================================================================================
steps:

  # create locations for all offices - these are created separately as more than one asset
  # can be located at an office and we dont want to duplicate code...
  # refer to the locations using the location_label...
  - step:
      action: LOCATIONS_CREATE_IF_NOT_EXISTS
      description: Create Cape Town Location
      location_label: Cape Town
    selector:
      - display_name
      - attributes:
        - namespace
    display_name: Cape Town
    description: South Africa Office
    latitude: -33.92527778
    longitude: 18.42388889
    attributes:
      namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      address: Cape Town Downtown
      Facility Type: Satellite Office
      reception_email: reception_CT@synsation.io
      reception_phone: +27 (21) 123-456

  - step:
      action: LOCATIONS_CREATE_IF_NOT_EXISTS
      description: Create Asia Location
      location_label: Asia Regional Sales Office
    selector:
      - display_name
      - attributes:
        - namespace
    display_name: Asia Regional Sales Office
    description: Asia Regional Sales Headquarters
    latitude: 18.52027778
    longitude: 73.85666667
    attributes:
      namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      address: "212, Late Govind Rambhau Taru Chowk Road, Shobhapur, Pune 411011"
      Facility Type: Sales
      reception_email: reception_PN@synsation.io
      reception_phone: +91 (20) 123-4567

  - step:
      action: LOCATIONS_CREATE_IF_NOT_EXISTS
      description: Create Baltimore Location
      location_label: Baltimore Regional Sales Office
    selector:
      - display_name
      - attributes:
        - namespace
    display_name: Baltimore Regional Sales Office
    description: East Coast Regional Sales Headquarters
    latitude: 39.28333333
    longitude: -76.61666667
    attributes:
      namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      address: Baltimore 21201, Maryland
      Facility Type: Sales
      reception_email: reception_BLT@synsation.io
      reception_phone: +1 (410) 123-4567

  - step:
      action: LOCATIONS_CREATE_IF_NOT_EXISTS
      description: Create European Location
      location_label: European Regional Sales Office
    selector:
      - display_name
      - attributes:
        - namespace
    display_name: European Regional Sales Office
    description: European Regional Sales Headquarters
    latitude: 52.20527778
    longitude: 0.11916667
    attributes:
      namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      address: Cambridge CB1 1BH, England
      Facility Type: Sales
      reception_email: reception_CAM@synsation.io
      reception_phone: +44 (1223) 123-456

  - step:
      action: LOCATIONS_CREATE_IF_NOT_EXISTS
      description: Create Grayslake Location
      location_label: Grayslake HQ
    selector:
      - display_name
      - attributes:
        - namespace
    display_name: Grayslake HQ
    description: Global Headquarters
    latitude: 42.34833333
    longitude: -88.03250000
    attributes:
      namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      address: Grayslake 60030, Illinois
      Facility Type: Headquarters
      reception_email: reception_GL@synsation.io
      reception_phone: +1 (847) 765-4321

  # create assets at each office
  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a multifunction printer in Cape Town
      asset_label: Multifunction Printer Cape Town
      location_label: Cape Town
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: Multifunction Printer Cape Town
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: printer
      arc_firmware_version: v1.0
      arc_serial_number: f867662g.1
      arc_description: Multifunction Printer Cape Town
    attachments:
      - filename: functests/test_resources/synsation/assets/multifunction_printer.jpg
        content_type: image/jpg
        display_name: Multifunction Printer Cape Town

  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a coffee machine in Asia.
      asset_label: Coffee Machine Asia
      location_label: Asia Regional Sales Office
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: Coffee Machine Asia
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: coffee machine
      arc_firmware_version: v1.0
      arc_serial_number: f867662g.1
      arc_description: Multifunction Printer Asia
    attachments:
      - filename: functests/test_resources/synsation/assets/coffee_machine.jpg
        content_type: image/jpg
        display_name: Coffee Machine Asis

  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a security camera in Baltimore
      asset_label: Security Camera Baltimore
      location_label: Baltimore Regional Sales Office
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: Security Camera Baltimore
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: security camera
      arc_firmware_version: v1.0
      arc_serial_number: f867662g.1
      arc_description: Security Camera Baltimore
    attachments:
      - filename: functests/test_resources/synsation/assets/black_cctv.jpg
        content_type: image/jpg
        display_name: Security Camera Baltimore

  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a multifunction printer in England
      asset_label: Multifunction Printer England
      location_label: European Regional Sales Office
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: Multifunction Printer England
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: printer
      arc_firmware_version: v1.0
      arc_serial_number: f867662g.1
      arc_description: Multifunction Printer England
    attachments:
      - filename: functests/test_resources/synsation/assets/multifunction_printer.jpg
        content_type: image/jpg
        display_name: Multifunction Printer England

  # ensure all are confirmed
  - step:
      action: ASSETS_WAIT_FOR_CONFIRMED
      description: Wait for all assets to be confirmed
      print_response: true
    attrs:
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}

  - step:
      action: ASSETS_LIST
      description: List all printers
      print_response: true
    attrs:
      arc_display_type: printer
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}

  - step:
      action: ASSETS_LIST
      description: List all coffee machines
      print_response: true
    attrs:
      arc_display_type: coffee machine
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}

  - step:
      action: ASSETS_LIST
      description: List all security cameras
      print_response: true
    attrs:
      arc_display_type: security camera
      arc_namespace: !ENV synsation ${ARCHIVIST_NAMESPACE:namespace}

  # synsation industries - the namespace value is extended...
  # #
  # First do the Large chargers...
  #
  # Full list of SFO stations: (all large EV chargers
  #    stations = [
  #      ["37.635647", "-122.399518"],
  #      ["37.635536", "-122.399464"],
  #      ["37.635366", "-122.399389"],
  #      ["37.635230", "-122.399292"],
  #      ["37.635089", "-122.399215"],
  #      ["37.634936", "-122.399140"],
  #      ["37.634562", "-122.400299"],
  #      ["37.634825", "-122.400460"],
  #      ["37.634689", "-122.400374"],
  #      
  #      from archivist-samples/synsation/synsation_industries...
  #      
  #      Also for San Jose, JFK, Chicago
  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a Large EV charger at SFO position 1
      asset_label: SFO-SFO-1
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: SFO-SFO-1
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: Large EV Charger
      arc_firmware_version: v1.0
      arc_serial_number: ev-12345-1
      arc_description: Large EV Charger charging station at SFO, position 1
    location:
      selector:
        - display_name
        - attributes:
          - namespace
      display_name: SFO-SFO-1
      description: Large EV Charger charging station at SFO, position 1
      latitude: 37.635647
      longitude: -122.399518
      attributes:
        namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}
    attachments:
      - filename: functests/test_resources/synsation/assets/large_ev_charger.jpg
        content_type: image/jpg
        display_name: arc_primary_image

  # ensure all are confirmed
  - step:
      action: ASSETS_WAIT_FOR_CONFIRMED
      description: Wait for all large charging stations to be confirmed
      print_response: true
    attrs:
      arc_display_type: Large EV Charger
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}

  - step:
      action: ASSETS_LIST
      description: List all large ev chargers
      print_response: true
    attrs:
      arc_display_type: Large EV Charger
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}

  # Second do the Small chargers...
  # 
  #  from archivist-samples/synsation/synsation_industries...
  #
  #  [["41.778129", "-87.749422"], ["41.777948", "-87.749397"]]
  - step:
      action: ASSETS_CREATE_IF_NOT_EXISTS
      description: Create a small EV charger at MDW position 1
      asset_label: MDW-MDW-1
    selector:
      - attributes:
        - arc_display_name
        - arc_namespace
    behaviours:
      - RecordEvidence
      - Attachments
    attributes:
      arc_display_name: MDW-MDW-1
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}
      arc_display_type: Small EV Charger
      arc_firmware_version: v1.0
      arc_serial_number: ev-12345-1
      arc_description: Small EV Charger charging station at MDW, position 1
    location:
      selector:
        - display_name
        - attributes:
          - namespace
      display_name: MDW-MDW-1
      description: Small EV Charger charging station at MDW, position 1
      latitude: 41.778129
      longitude: -87.749422
      attributes:
        namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}
    attachments:
      - filename: functests/test_resources/synsation/assets/small_ev_charger.jpg
        content_type: image/jpg
        display_name: arc_primary_image

  # ensure all are confirmed
  - step:
      action: ASSETS_WAIT_FOR_CONFIRMED
      description: Wait for all small charging stations to be confirmed
      print_response: true
    attrs:
      arc_display_type: Small EV Charger
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}

  - step:
      action: ASSETS_LIST
      description: List all small ev chargers
      print_response: true
    attrs:
      arc_display_type: Small EV Charger
      arc_namespace: !ENV synsation industries ${ARCHIVIST_NAMESPACE:namespace}

