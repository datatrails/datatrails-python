#!/bin/sh
#
# inserts version into python package
#
if [ -n "${GITHUB_REF}" ]
then
    version=$(echo ${GITHUB_REF} | rev | cut -d'/' -f1 | rev )
else
    version=$(git describe --tags --long --dirty)
fi

cat > archivist/about.py <<EOF
"""Archivist SDK

   WARNING: Do **not** edit directly
   This file is auto-generated by ./scripts/version.sh and is
   not version controlled by git (ironically) as this would
   make the generated version from the tag 'dirty'
"""
__version__ = "$version"
EOF
